@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================
   Font
   ============================================================ */
@font-face {
  font-family: 'FuturaCondensed';
  src: url('./assets/fonts/futura-condensed-pt-medium-589e44ed1e3a5.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

/* ============================================================
   Base (global)
   ============================================================ */
@layer base {
  html {
    color-scheme: dark;
    font-size: 22px; /* make 1rem match Pip-Boy base text */
  }

  body {
    @apply bg-gray-900 text-green-200;
    font-family: 'FuturaCondensed', system-ui, sans-serif;
    font-size: 22px;
    line-height: 1.15;
  }
}

/* ============================================================
   App layout components
   ============================================================ */
.container {
  @apply max-w-6xl mx-auto px-4 py-8;
}

.card {
  /* Pip-Boy-ish green border */
  @apply bg-gray-800 rounded-lg shadow-lg border border-green-900/60;
  box-shadow:
    0 0 0 1px rgba(34, 197, 94, 0.12),
    0 0 24px rgba(34, 197, 94, 0.08);
}

.card-header {
  @apply px-6 py-4 border-b border-green-900/60 bg-gray-750 rounded-t-lg;
}

.card-body {
  @apply p-6 max-h-[calc(100vh-200px)] overflow-y-auto;
}

.card-body-tight {
  @apply p-0 max-h-[calc(100vh-200px)] overflow-y-auto;
}

.btn {
  @apply px-4 py-2 rounded-md font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900;
  /* Keep button text at least as big as row text */
  font-size: 22px;
  line-height: 1.15;
}

.btn-primary {
  @apply bg-green-700 text-black hover:bg-green-600 focus:ring-green-500;
}

.btn-secondary {
  @apply bg-gray-600 text-white hover:bg-gray-700 focus:ring-green-500;
}

.btn-success {
  @apply bg-green-600 text-black hover:bg-green-500 focus:ring-green-500;
}

.btn-danger {
  @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
}

.btn-warning {
  @apply bg-yellow-600 text-black hover:bg-yellow-500 focus:ring-yellow-500;
}

.btn-sm {
  @apply px-3 py-1;
  font-size: 22px;
  line-height: 1.15;
}

.btn:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.form-input {
  @apply block w-full px-3 py-2 border border-green-900/50 rounded-md shadow-sm
    focus:outline-none focus:ring-green-500 focus:border-green-500
    bg-gray-700 text-green-100 placeholder-green-200/40;
  font-size: 22px;
  line-height: 1.15;
}

.form-label {
  @apply block font-medium text-green-200/80 mb-1;
  font-size: 22px;
  line-height: 1.15;
}

.form-group {
  @apply mb-4;
}

.tab-container {
  @apply border-b border-green-900/60 mb-6;
}

.tab {
  @apply inline-block px-4 py-2 font-medium text-green-200/70 border-b-2 border-transparent
    hover:text-green-100 hover:border-green-500 cursor-pointer transition-colors duration-200;
  font-size: 22px;
  line-height: 1.15;
}

.tab.active {
  @apply text-green-200 border-green-400;
}

/* Upload section centering */
#dropZone {
  @apply flex flex-col items-center justify-center text-center;
}

/* Drag and drop */
.drop-zone {
  @apply border-2 border-dashed border-green-900/60 rounded-lg p-8 text-center
    hover:border-green-500 transition-colors duration-200 bg-gray-750;
}

.drop-zone.dragover,
.drop-zone.drag-over,
#dropZone.drag-over {
  @apply border-green-400 bg-green-900/20;
}

/* Modal Styles */
.modal {
  @apply fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60;
}

.modal-content {
  @apply bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 border border-green-900/60;
}

.modal-header {
  @apply px-6 py-4 border-b border-green-900/60 bg-gray-750 rounded-t-lg;
}

.modal-body {
  @apply p-6;
}

.modal-footer {
  @apply px-6 py-4 border-t border-green-900/60 bg-gray-750 rounded-b-lg flex justify-end space-x-3;
}

.modal-hidden {
  display: none;
}

/* Toast Notifications */
.toast {
  @apply min-w-80 max-w-sm p-4 rounded-lg border border-green-900/60 shadow-lg backdrop-blur-sm relative;
  animation: slideInRight 0.3s ease-out;
}

.toast-content {
  @apply flex items-center gap-3;
}

.toast-icon {
  @apply text-lg flex-shrink-0;
}

.toast-message {
  @apply flex-1 font-medium break-words;
  font-size: 22px;
  line-height: 1.15;
}

.toast-close {
  @apply ml-2 text-lg font-bold opacity-70 hover:opacity-100 transition-opacity cursor-pointer
    bg-transparent border-none text-inherit flex-shrink-0 w-6 h-6 flex items-center justify-center rounded;
}

.toast-close:hover {
  @apply bg-black bg-opacity-20;
}

/* Sort indicator (keeps header width stable) */
.dw-sort-indicator {
  position: absolute;
  right: 0.35rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.75em;
  line-height: 1;
  opacity: 0.9;
}

/* Code block styling */
code {
  @apply inline bg-gray-800 text-green-400 font-mono px-1 rounded-sm;
}

pre {
  @apply block bg-gray-800 text-green-400 font-mono text-sm overflow-x-auto;
}

pre code {
  @apply bg-transparent text-inherit;
}

.code-block {
  @apply bg-gray-800 font-mono text-sm text-green-400 overflow-x-auto;
}

.inline-code {
  @apply inline bg-gray-800 text-green-400 font-mono text-sm;
}

.file-path {
  @apply inline bg-gray-800 text-yellow-400 font-mono text-sm px-1 rounded-sm;
}

/* Utilities */
@layer utilities {
  .bg-gray-750 {
    background-color: rgb(55, 65, 81);
  }

  .border-gray-750 {
    border-color: rgb(55, 65, 81);
  }

  .max-h-\[calc\(100vh-200px\)\] {
    max-height: calc(100vh - 200px);
  }

  /* Make any Tailwind "small text" at least the base size (requested) */
  .text-xs,
  .text-sm {
    font-size: 1rem;
    line-height: 1.15;
  }

  /* Clamp common arbitrary small text sizes used in a few templates */
  .text-\[10px\],
  .text-\[11px\],
  .text-\[12px\] {
    font-size: 1rem !important;
    line-height: 1.15 !important;
  }
}

/* Responsive */
@media (max-width: 768px) {
  .special-grid {
    @apply grid-cols-4;
  }

  .resource-grid {
    @apply grid-cols-2;
  }

  .container {
    @apply px-2;
  }
}

/* ============================================================
   Pip-Boy / CRT Effects (global)
   ============================================================ */

/* Overall CRT glow + slight green phosphor */
body {
  text-shadow:
    0 0 6px rgba(34, 197, 94, 0.22),
    0 0 14px rgba(34, 197, 94, 0.14);
}

/* Scanlines + vignette */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;

  background:
    repeating-linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.00) 0px,
      rgba(0, 0, 0, 0.00) 2px,
      rgba(0, 0, 0, 0.18) 3px
    ),
    radial-gradient(
      circle at center,
      rgba(0, 0, 0, 0.00) 0%,
      rgba(0, 0, 0, 0.35) 75%,
      rgba(0, 0, 0, 0.55) 100%
    );

  mix-blend-mode: multiply;
  opacity: 0.55;
}

/* subtle flicker */
@keyframes crtFlicker {
  0% { opacity: 0.22; }
  15% { opacity: 0.28; }
  30% { opacity: 0.20; }
  45% { opacity: 0.30; }
  60% { opacity: 0.24; }
  75% { opacity: 0.32; }
  100% { opacity: 0.22; }
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 10000;

  background: rgba(34, 197, 94, 0.08);
  mix-blend-mode: screen;
  animation: crtFlicker 6s infinite;
}

/* Terminal-ish flicker */
@keyframes terminalFlicker {
  0%, 100% { filter: brightness(1) contrast(1); }
  50% { filter: brightness(1.06) contrast(1.03); }
}
#app {
  animation: terminalFlicker 5.5s infinite;
}

/* Subtle bloom on bars */
@keyframes barBloom {
  0%, 100% { filter: drop-shadow(0 0 0 rgba(34,197,94,0.0)); }
  50% { filter: drop-shadow(0 0 6px rgba(34,197,94,0.35)); }
}
.bg-green-500 {
  animation: barBloom 3.5s infinite;
}



/* =========================
   Pip-Boy theme overrides
   ========================= */

:root {
  --pip-green: rgb(34, 197, 94); /* tailwind green-500 */
  --pip-green-glow: rgba(34, 197, 94, 0.55);
  --pip-scanline: rgba(0, 0, 0, 0.18);
}

@layer base {
  body {
    color: var(--pip-green);
    text-shadow: 0 0 10px var(--pip-green-glow);
    animation: pip-flicker 6s infinite;
  }
}

/* Force all UI text to the same Pip-Boy green (without affecting backgrounds) */
body, body * {
  color: var(--pip-green) !important;
}

/* CRT scanlines + vignette */
body::before {
  content: "";
  pointer-events: none;
  position: fixed;
  inset: 0;
  z-index: 9999;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.0) 0px,
      rgba(0, 0, 0, 0.0) 2px,
      var(--pip-scanline) 3px
    );
  opacity: 0.35;
  mix-blend-mode: multiply;
}

body::after {
  content: "";
  pointer-events: none;
  position: fixed;
  inset: 0;
  z-index: 9998;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.0) 40%, rgba(0,0,0,0.45) 100%);
}

/* Subtle bloom on bars */
.pip-bar {
  box-shadow: 0 0 10px var(--pip-green-glow);
  filter: saturate(1.25) brightness(1.05);
}

/* General card / section borders in Pip-Boy style */
.card, .modal-content, .drop-zone {
  border-color: rgba(34, 197, 94, 0.45) !important;
  box-shadow: 0 0 18px rgba(34, 197, 94, 0.08);
}

/* Tabs/buttons/labels should not be smaller than row text */
.tab, .btn, .form-label, .toast-message, #dropZone, #dropZone *, #testBuildBand, #testBuildBand * {
  font-size: 1em !important;
}

/* Dweller list grid alignment */
.dw-grid {
  display: grid;
  grid-template-columns:
    minmax(150px, 1fr)  /* NAME (reduced) */
    56px                /* M/F */
    56px                /* LVL */
    90px                /* XP */
    70px                /* ðŸ˜Š */
    180px               /* SPECIAL */
    140px;              /* HEALTH */
  gap: 12px;
}

.dw-header {
  padding: 4px 0;
  font-weight: 400;
}

.dweller-row {
  padding: 2px 0;
  font-weight: 400;
}

/* Header label + sort indicator */
.pip-header-label {
  display: inline-block;
  text-transform: uppercase;
}

.pip-sort-indicator {
  position: absolute;
  left: 50%;
  transform: translateX(-50%) scaleX(1.55);
  bottom: -12px; /* sits over/through the bottom border line */
  font-size: 18px;
  line-height: 1;
  color: var(--pip-green);
  text-shadow: 0 0 10px var(--pip-green-glow);
  pointer-events: none;
}

/* Flicker */
@keyframes pip-flicker {
  0%, 100% { filter: brightness(1) contrast(1.05); opacity: 1; }
  47% { filter: brightness(0.98) contrast(1.08); opacity: 0.98; }
  48% { filter: brightness(1.08) contrast(1.1); opacity: 0.95; }
  49% { filter: brightness(1.0) contrast(1.06); opacity: 1; }
}
